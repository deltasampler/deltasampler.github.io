var ye=Object.defineProperty;var Te=(n,i,e)=>i in n?ye(n,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[i]=e;var a=(n,i,e)=>Te(n,typeof i!="symbol"?i+"":i,e);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function U(n,i){return(n+i)%i}function S(n,i){return Math.floor(Math.random()*(i-n)+n)}function J(n,i,e){return i*e+n}const Q=Float32Array;function D(n=0,i,e){const t=new Q(3);return t[0]=n,t[1]=i??n,t[2]=e??n,t}function B(n,i,e){return Math.min(Math.max(n,i),e)}var E=(n=>(n[n.PX=0]="PX",n[n.PCT=1]="PCT",n[n.FR=2]="FR",n))(E||{});const Se={0:"px",1:"%",2:"fr"};class Le{constructor(){a(this,"x");a(this,"u")}}function T(n,i){const e=new Le;return e.x=n,e.u=i,e}function Ne(n){return`${n.x}${Se[n.u]}`}class Re{constructor(){a(this,"type");a(this,"object");a(this,"key");a(this,"call_get");a(this,"call_set")}get(){return this.type===0?this.object[this.key]:this.call_get()}set(i){this.type===0?this.object[this.key]=i:this.call_set(i)}}function y(n,i){const e=new Re;return e.type=0,e.object=n,e.key=i,e}function v(n,i){if(!n)return null;const e=document.createElement("span");return e.className="gui_label",e.innerHTML=n,i.append(e),e}function L(){const n=document.createElement("div");return n.className="gui_container",n}function P(n,i,e,t,s){const o=document.createElement("input");return o.className="gui_input",o.type=n,o.step=e.toString(),o.min=t.toString(),o.max=s.toString(),o.value=i.toString(),o}function X(n,i){const e=document.createElement("table");if(e.className="gui_table",i.length){const t=document.createElement("tr");e.append(t);for(const s of i){const o=document.createElement("th");o.innerHTML=s,t.append(o)}}for(const t of n){const s=document.createElement("tr");e.append(s);for(const o of t){const r=document.createElement("td");r.innerHTML=o,s.append(r)}}return e}class g{constructor(){a(this,"children",[]);a(this,"ref_el")}container(){return this.ref_el}render(){}mount(){}static mount(){}update(){}}class Z extends g{constructor(){super(...arguments);a(this,"id");a(this,"title");a(this,"grid_x");a(this,"grid_y");a(this,"layout");a(this,"window_parent");a(this,"window_children")}grid_str(e){let t="";for(let s=0;s<e.length;s+=1){const o=e[s];t+=Ne(o),s<e.length-1&&(t+=" ")}return t}layout_str(){let e="";const t=this.grid_x.length,s=this.grid_y.length,o=t*s;for(let r=0;r<o;r+=t){let c="";for(let _=r;_<r+t;_+=1){const d=this.layout[_];c+=`w${d}`,_<r+t-1&&(c+=" ")}e+=`"${c}"
`}return e}render(){const e=document.createElement("div");this.window_parent?e.className="gui_window":e.className="gui_window_root",this.window_children.length?(e.style.display="grid",e.style.gridTemplateColumns=this.grid_str(this.grid_x),e.style.gridTemplateRows=this.grid_str(this.grid_y),e.style.gridTemplateAreas=this.layout_str()):e.style.gridArea=`w${this.id}`,this.ref_el=e}}class ee extends g{constructor(){super(...arguments);a(this,"title");a(this,"is_collapsed");a(this,"container_el")}container(){return this.container_el}render(){const e=document.createElement("div");e.className="gui_collapsing_header"+(this.is_collapsed?" gui_is_collapsed":"");const t=document.createElement("div");t.className="gui_title",t.innerHTML=this.title,e.append(t),t.onclick=(function(){this.is_collapsed?(this.is_collapsed=!1,e.classList.remove("gui_is_collapsed")):(this.is_collapsed=!0,e.classList.add("gui_is_collapsed"))}).bind(this);const s=L();e.append(s),this.ref_el=e,this.container_el=s}}class te extends g{constructor(){super(...arguments);a(this,"value")}render(){const e=document.createElement("div");e.className="gui_text",e.innerHTML=this.value,this.ref_el=e}}class ne extends g{constructor(){super(...arguments);a(this,"label");a(this,"value");a(this,"onchange");a(this,"input_el")}render(){const e=document.createElement("div");e.className="gui_bool";const t=document.createElement("div");t.className="gui_checkbox_group_option"+(this.value.get()?" gui_selected":""),t.innerHTML=this.label,e.append(t),t.onclick=(function(){this.value.get()?(this.value.set(!1),t.classList.remove("gui_selected")):(this.value.set(!0),t.classList.add("gui_selected")),this.onchange(this.value.get())}).bind(this),this.ref_el=e,this.input_el=t}update(){this.value.get()?this.input_el.classList.add("gui_selected"):this.input_el.classList.remove("gui_selected")}}class ie extends g{constructor(){super(...arguments);a(this,"label");a(this,"value");a(this,"step");a(this,"min");a(this,"max");a(this,"onchange");a(this,"input_el")}render(){const e=document.createElement("div");e.className="gui_input_number",v(this.label,e);const t=P("number",this.value.get(),this.step,this.min,this.max);e.append(t),t.onchange=(function(){const s=B(parseFloat(t.value),this.min,this.max);this.value.set(s),t.value=s.toString(),this.onchange(s)}).bind(this),this.ref_el=e,this.input_el=t}update(){document.activeElement!=this.input_el&&(this.input_el.value=this.value.get().toString())}}class se extends g{constructor(){super(...arguments);a(this,"label");a(this,"value");a(this,"step");a(this,"min");a(this,"max");a(this,"container_el");a(this,"onchange");a(this,"input_el")}render(){const e=document.createElement("div");e.className="gui_slider_number",v(this.label,e);const t=L();t.className="gui_input_range_container",e.append(t);const s=P("range",this.value.get(),this.step,this.min,this.max);s.className="gui_input_range",t.dataset.content=s.value,t.append(s),s.onchange=(function(){const o=B(parseFloat(s.value),this.min,this.max);this.value.set(o),t.dataset.content=s.value,this.onchange(o)}).bind(this),s.onmousemove=function(){t.dataset.content=s.value},this.ref_el=e,this.container_el=t,this.input_el=s}update(){document.activeElement!=this.input_el&&(this.input_el.value=this.value.get().toString(),this.container_el.dataset.content=this.input_el.value)}}class Ae extends g{constructor(){super(...arguments);a(this,"label");a(this,"value");a(this,"step");a(this,"min");a(this,"max");a(this,"size");a(this,"onchange");a(this,"input_els")}render(){const e=document.createElement("div");e.className="gui_input_vec",e.style.setProperty("--size",this.size.toString()),v(this.label,e);const t=L();e.append(t);const s=[];for(let o=0;o<this.value.length;o+=1){const r=P("number",this.value[o],this.step,this.min,this.max);t.append(r),r.onchange=(function(){const c=B(parseFloat(r.value),this.min,this.max);this.value[o]=c,r.value=c.toString(),this.onchange(this.value)}).bind(this),s.push(r)}this.ref_el=e,this.input_els=s}update(){for(let e=0;e<this.value.length;e+=1){const t=this.input_els[e];document.activeElement!=t&&(t.value=this.value[e].toString())}}}var oe=(n=>(n[n.R_0_1=0]="R_0_1",n[n.R_0_255=1]="R_0_255",n))(oe||{});class ae extends g{constructor(){super(...arguments);a(this,"label");a(this,"value");a(this,"mode");a(this,"onchange");a(this,"input_el");a(this,"range_container_el");a(this,"range_el")}to_hex(e,t,s){const o=this.mode===0?255:1,r=Math.round(e*o).toString(16).padStart(2,"0"),c=Math.round(t*o).toString(16).padStart(2,"0"),_=Math.round(s*o).toString(16).padStart(2,"0");return`#${r}${c}${_}`}from_hex(e){const t=e.replace(/^#/,""),s=this.mode===0?255:1,o=parseInt(t.substring(0,2),16)/s,r=parseInt(t.substring(2,4),16)/s,c=parseInt(t.substring(4,6),16)/s;return[o,r,c]}render(){const e=document.createElement("div");e.className="gui_color_edit"+(this.value.length===4?" gui_rgba":""),v(this.label,e);const t=L();e.append(t);const s=document.createElement("input");if(s.className="gui_input_color",s.type="color",s.value=this.to_hex(this.value[0],this.value[1],this.value[2]),t.append(s),s.onchange=(function(){const o=this.from_hex(s.value);this.value[0]=o[0],this.value[1]=o[1],this.value[2]=o[2],this.onchange(this.value)}).bind(this),this.value.length==4){const o=document.createElement("div");o.className="gui_input_range_container",t.append(o);const r=P("range",this.value[3],.01,0,1);r.className="gui_input_range",o.dataset.content=r.value,o.append(r),r.onchange=(function(){this.value[3]=parseFloat(r.value),o.dataset.content=r.value,this.onchange(this.value)}).bind(this),r.onmousemove=function(){o.dataset.content=r.value},this.range_el=r,this.range_container_el=o}this.ref_el=e,this.input_el=s}update(){document.activeElement!=this.input_el&&(this.input_el.value=this.to_hex(this.value[0],this.value[1],this.value[2])),this.range_container_el&&this.range_el&&document.activeElement!=this.range_el&&(this.range_el.value=this.value[3].toString(),this.range_container_el.dataset.content=this.range_el.value)}}class ke extends g{constructor(){super(...arguments);a(this,"label");a(this,"value");a(this,"onchange");a(this,"input_el")}render(){const e=document.createElement("div");e.className="gui_input_text",v(this.label,e);const t=document.createElement("input");t.className="gui_input",t.type="text",t.value=this.value.get().toString(),e.append(t),t.onchange=(function(){this.value.set(t.value),this.onchange(t.value)}).bind(this),this.ref_el=e,this.input_el=t}update(){document.activeElement!=this.input_el&&(this.input_el.value=this.value.get().toString())}}class Pe extends g{constructor(){super(...arguments);a(this,"label");a(this,"value");a(this,"keys");a(this,"values");a(this,"onchange");a(this,"option_els")}render(){const e=document.createElement("div");e.className="gui_radio_group",v(this.label,e);const t=L();e.append(t);const s=[],o=this.value.get();for(let r=0;r<this.keys.length;r+=1){const c=this.keys[r],_=this.values[r],d=document.createElement("div");d.className="gui_radio_group_option"+(_===o?" gui_selected":""),d.innerHTML=c,t.append(d),d.onclick=(function(){this.value.set(_);for(const j of this.option_els)j.classList.remove("gui_selected");d.classList.add("gui_selected"),this.onchange(_)}).bind(this),s.push(d)}this.ref_el=e,this.option_els=s}update(){const e=this.value.get();for(let t=0;t<this.option_els.length;t+=1){const s=this.option_els[t];this.values[t]===e?s.classList.add("gui_selected"):s.classList.remove("gui_selected")}}}class Fe extends g{constructor(){super(...arguments);a(this,"label");a(this,"value");a(this,"keys");a(this,"values");a(this,"onchange");a(this,"option_els")}render(){const e=document.createElement("div");e.className="gui_checkbox_group",v(this.label,e);const t=L();e.append(t);const s=[],o=this.value.get();for(let r=0;r<this.keys.length;r+=1){const c=this.keys[r],_=this.values[r],d=document.createElement("div");d.className="gui_checkbox_group_option"+(o.indexOf(_)>-1?" gui_selected":""),d.innerHTML=c,t.append(d),d.onclick=(function(){d.classList.contains("gui_selected")?(o.splice(o.indexOf(_),1),d.classList.remove("gui_selected")):(o.push(_),d.classList.add("gui_selected")),this.onchange(this.value.get())}).bind(this),s.push(d)}this.ref_el=e,this.option_els=s}update(){const e=this.value.get();for(let t=0;t<this.option_els.length;t+=1){const s=this.option_els[t];e.indexOf(this.values[t])>-1?s.classList.add("gui_selected"):s.classList.remove("gui_selected")}}}class le extends g{constructor(){super(...arguments);a(this,"label");a(this,"value");a(this,"keys");a(this,"values");a(this,"onchange");a(this,"button_el");a(this,"option_els")}render(){const e=document.createElement("div");e.className="gui_select",v(this.label,e);const t=document.createElement("div");t.className="gui_select",e.append(t),t.onclick=function(_){_.stopPropagation()};const s=document.createElement("div");s.className="gui_select_button",s.innerHTML="Select",t.append(s),s.onclick=function(){s.classList.contains("gui_open")?s.classList.remove("gui_open"):s.classList.add("gui_open")};const o=document.createElement("div");o.className="gui_select_container",t.append(o);const r=[],c=this.value.get();for(let _=0;_<this.keys.length;_+=1){const d=this.keys[_];this.values[_]===c&&(s.innerHTML=d);const b=document.createElement("div");b.className="gui_select_option",b.innerHTML=d,b.dataset.value=_.toString(),o.append(b),b.onclick=(function(){const Y=this.values[parseInt(b.dataset.value||"")];this.value.set(Y),s.innerHTML=d,s.classList.remove("gui_open"),this.onchange(Y)}).bind(this),r.push(b)}this.ref_el=e,this.button_el=s,this.option_els=r}static mount(){const e=document.body.querySelector(".gui_window_root");e&&e.addEventListener("click",function(){const t=document.body.querySelector(".gui_select_button.gui_open");t&&t.classList.remove("gui_open")})}update(){const e=this.value.get();for(let t=0;t<this.option_els.length;t+=1)if(this.values[t]===e){this.button_el.innerHTML=this.keys[t];return}}}class re extends g{constructor(){super(...arguments);a(this,"label");a(this,"onclick")}render(){const e=document.createElement("div");e.className="gui_button";const t=document.createElement("button");t.innerHTML=this.label,t.onclick=this.onclick,e.append(t),this.ref_el=e}}class ce extends g{constructor(){super(...arguments);a(this,"auto_resize");a(this,"canvas_el")}render(){const e=document.createElement("div");e.className="gui_canvas";const t=document.createElement("canvas");e.append(t),this.auto_resize&&window.addEventListener("resize",function(){var s,o;t.width=((s=t.parentElement)==null?void 0:s.clientWidth)||0,t.height=((o=t.parentElement)==null?void 0:o.clientHeight)||0}),this.ref_el=e,this.canvas_el=t}mount(){var e,t;this.auto_resize&&(this.canvas_el.width=((e=this.canvas_el.parentElement)==null?void 0:e.clientWidth)||0,this.canvas_el.height=((t=this.canvas_el.parentElement)==null?void 0:t.clientHeight)||0)}}const Me=[Z,ee,te,ne,ie,se,Ae,ae,ke,Pe,Fe,le,re,ce];let V=0;function $(n,i=""){const e=new Z;return e.id=V,e.title=i,e.grid_x=[],e.grid_y=[],e.layout=[],e.window_parent=n,e.window_children=[],n&&(n.children.push(e),n.window_children.push(e)),V+=1,e}function Ie(n,i,e){n.grid_x=i,n.grid_y=e}function He(n,i){const e=[];for(const t of i)e.push(t.id);n.layout=e}function F(n,i,e=!1){const t=new ee;return t.title=i,t.is_collapsed=e,n.children.push(t),t}function M(n,i){const e=new te;return e.value=i,n.children.push(e),e}function ue(n,i,e,t=()=>{}){const s=new ne;return s.label=i,s.value=e,s.onchange=t,n.children.push(s),s}function _e(n,i,e,t,s,o,r=()=>{}){const c=new ie;return c.label=i,c.value=e,c.step=t,c.min=s,c.max=o,c.onchange=r,n.children.push(c),c}function de(n,i,e,t,s,o,r=()=>{}){const c=new se;return c.label=i,c.value=e,c.step=t,c.min=s,c.max=o,c.onchange=r,n.children.push(c),c}function Ue(n,i,e,t,s=()=>{}){const o=new ae;return o.label=i,o.value=t,o.mode=e,o.onchange=s,n.children.push(o),o}function Ce(n,i,e,t,s,o=()=>{}){const r=new le;return r.label=i,r.value=e,r.keys=t,r.values=s,r.onchange=o,n.children.push(r),r}function G(n,i,e){const t=new re;return t.label=i,t.onclick=e,n.children.push(t),t}function De(n,i=!0){const e=new ce;return e.auto_resize=i,n.children.push(e),e}function he(n,i){n.render(),i.append(n.ref_el),n.mount();for(const e of n.children)he(e,n.container())}function pe(n,i,e=!0){if(he(n,i),!!e)for(const t of Me)t.mount()}let h;function Be(n){return h=n.getContext("webgl2")}function Xe(n,i){const e=h.createShader(n);if(!e)return null;if(h.shaderSource(e,i),h.compileShader(e),!h.getShaderParameter(e,h.COMPILE_STATUS)){const s=h.getShaderInfoLog(e);return console.error(s),h.deleteShader(e),null}return e}function $e(n){const i=h.createProgram(),e=[];for(const s in n){const o=n[s],r=Xe(parseInt(s),o);if(!r){for(const c of e)h.deleteShader(c);return null}e.push(r)}for(const s of e)h.attachShader(i,s);h.linkProgram(i);for(const s of e)h.detachShader(i,s),h.deleteShader(s);if(!h.getProgramParameter(i,h.LINK_STATUS)){const s=h.getProgramInfoLog(i);return console.error(s),h.deleteProgram(i),null}return i}function m(n=0,i){const e=new Q(2);return e[0]=n,e[1]=i??n,e}const K=[m(0,1),m(1,1),m(1,0),m(1,-1),m(0,-1),m(-1,-1),m(-1,0),m(-1,1)];function ge(n,i){return`${n}_${i[0]}_${i[1]}_${i[2]}`}function Ge(n,i,e,t,s,o){n[ge(i,e)]={next_state:t,next_color:s,turn:o}}class Oe{constructor(){a(this,"x");a(this,"y");a(this,"dir");a(this,"state");a(this,"table")}}function qe(n,i,e,t,s){const o=new Oe;return o.x=n,o.y=i,o.dir=e,o.state=t,o.table=s,o}class ze{constructor(){a(this,"width");a(this,"height");a(this,"data")}}function me(n,i){const e=new ze;return e.width=n,e.height=i,e.data=new Uint8Array(n*i*3),e}function fe(n,i,e,t){const s=J(i,e,n.width)*3;n.data[s]=t[0],n.data[s+1]=t[1],n.data[s+2]=t[2]}function We(n,i,e){const t=J(i,e,n.width)*3;return D(n.data[t],n.data[t+1],n.data[t+2])}const R=[{name:"Langton's Ant",colors:2,table:[[0,0,0,1,2],[0,1,0,0,-2]]},{name:"Rings",colors:2,table:[[0,0,0,1,2],[0,1,1,1,2],[1,0,0,0,0],[1,1,1,0,0]]},{name:"Spiral",colors:2,table:[[0,0,1,1,0],[0,1,0,1,-2],[1,0,1,1,2],[1,1,0,0,0]]},{name:"Fibonacci Spiral",colors:2,table:[[0,0,1,1,-2],[0,1,1,1,-2],[1,0,1,1,2],[1,1,0,0,0]]},{name:"Growing Square",colors:2,table:[[0,0,0,1,-2],[0,1,1,1,2],[1,0,0,0,2],[1,1,1,0,-2]]},{name:"Brain Folds",colors:2,table:[[0,0,1,1,2],[0,1,1,1,-2],[1,0,1,1,2],[1,1,0,0,2]]},{name:"Like Langton's Ant",colors:2,table:[[0,0,1,1,2],[0,1,1,0,2],[1,0,0,1,0],[1,1,1,1,0]]},{name:"Strip",colors:2,table:[[0,0,0,1,2],[0,1,0,0,0]]},{name:"Random Mess",colors:3,table:[[0,0,0,1,2],[0,1,0,2,-2],[0,2,0,0,2]]},{name:"Cardiod",colors:4,table:[[0,0,0,1,-2],[0,1,0,2,-2],[0,2,0,3,2],[0,3,0,0,2]]},{name:"Expanding Frame",colors:9,table:[[0,0,0,1,-2],[0,1,0,2,2],[0,2,0,3,2],[0,3,0,4,2],[0,4,0,5,2],[0,5,0,6,2],[0,6,0,7,-2],[0,7,0,8,-2],[0,8,0,0,2]]},{name:"Spiral Highway",colors:12,table:[[0,0,0,1,-2],[0,1,0,2,-2],[0,2,0,3,2],[0,3,0,4,2],[0,4,0,5,2],[0,5,0,6,-2],[0,6,0,7,2],[0,7,0,8,-2],[0,8,0,9,2],[0,9,0,10,-2],[0,10,0,11,-2],[0,11,0,0,2]]},{name:"Triangles",colors:12,table:[[0,0,0,1,2],[0,1,0,2,2],[0,2,0,3,-2],[0,3,0,4,-2],[0,4,0,5,-2],[0,5,0,6,2],[0,6,0,7,-2],[0,7,0,8,-2],[0,8,0,9,-2],[0,9,0,10,2],[0,10,0,11,2],[0,11,0,0,2]]},{name:"Lines",colors:2,table:[[0,0,0,1,3],[0,1,0,0,-1]]},{name:"Grid",colors:12,table:[[0,0,0,1,0],[0,1,0,2,-4],[0,2,0,3,0],[0,3,0,4,-2],[0,4,0,5,2],[0,5,0,6,1],[0,6,0,7,0],[0,7,0,8,1],[0,8,0,9,3],[0,9,0,10,-4],[0,10,0,11,0],[0,11,0,0,-3]]},{name:"Fracturing",colors:12,table:[[0,0,0,1,0],[0,1,0,2,-4],[0,2,0,3,1],[0,3,0,4,1],[0,4,0,5,0],[0,5,0,6,-3],[0,6,0,7,0],[0,7,0,8,-3],[0,8,0,9,0],[0,9,0,10,2],[0,10,0,11,-1],[0,11,0,0,-4]]},{name:"Square Segments",colors:12,table:[[0,0,0,1,0],[0,1,0,2,3],[0,2,0,3,1],[0,3,0,4,-1],[0,4,0,5,-3],[0,5,0,6,0],[0,6,0,7,-4],[0,7,0,8,1],[0,8,0,9,-3],[0,9,0,10,-4],[0,10,0,11,0],[0,11,0,0,-4]]},{name:"Square Segments 2",colors:12,table:[[0,0,0,1,0],[0,1,0,2,-3],[0,2,0,3,1],[0,3,0,4,-1],[0,4,0,5,2],[0,5,0,6,-3],[0,6,0,7,-3],[0,7,0,8,0],[0,8,0,9,2],[0,9,0,10,3],[0,10,0,11,-2],[0,11,0,0,0]]},{name:"Square Segments 3",colors:10,table:[[0,0,0,1,0],[0,1,0,2,3],[0,2,0,3,-4],[0,3,0,4,3],[0,4,0,5,-2],[0,5,0,6,-3],[0,6,0,7,-1],[0,7,0,8,2],[0,8,0,9,-3],[0,9,0,0,-4]]},{name:"Square Highways",colors:8,table:[[0,0,0,1,3],[0,1,0,2,-4],[0,2,0,3,3],[0,3,0,4,0],[0,4,0,5,-3],[0,5,0,6,-3],[0,6,0,7,2],[0,7,0,0,3]]},{name:"Wide Fill",colors:5,table:[[0,0,0,1,0],[0,1,0,2,0],[0,2,0,3,0],[0,3,0,4,3],[0,4,0,0,-3]]}],N=$(null);Ie(N,[T(300,E.PX),T(1,E.FR),T(300,E.PX)],[T(1,E.FR),T(1,E.FR),T(1,E.FR)]);const f=$(N),x=$(N);He(N,[f,x,x,f,x,x,f,x,x]);const je=De(x);pe(N,document.body);const w=je.canvas_el,l=Be(w),O=$e({[l.VERTEX_SHADER]:`#version 300 es
        layout(location = 0) in vec2 i_position;
        layout(location = 1) in vec2 i_tex_coord;
        out vec2 v_tex_coord;
        uniform float u_scale_x;
        uniform float u_scale_y;

        void main() {
            gl_Position = vec4(i_position * vec2(u_scale_x, u_scale_y), 0.0, 1.0);
            v_tex_coord = i_tex_coord;
        }
    `,[l.FRAGMENT_SHADER]:`#version 300 es
        precision highp float;
        in vec2 v_tex_coord;
        out vec4 o_frag_color;
        uniform sampler2D u_texture;

        void main() {
            o_frag_color = texture(u_texture, v_tex_coord);
        }
    `}),Ye=l.getUniformLocation(O,"u_scale_x"),Ve=l.getUniformLocation(O,"u_scale_y"),Ke=[-1,1,0,0,-1,-1,0,1,1,-1,1,1,1,1,1,0],ve=[0,1,2,0,2,3],Je=ve.length,be=l.createVertexArray();l.bindVertexArray(be);const Qe=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,Qe);l.bufferData(l.ARRAY_BUFFER,new Float32Array(Ke),l.STATIC_DRAW);l.enableVertexAttribArray(0);l.vertexAttribPointer(0,2,l.FLOAT,!1,16,0);l.enableVertexAttribArray(1);l.vertexAttribPointer(1,2,l.FLOAT,!1,16,8);const Ze=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,Ze);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint32Array(ve),l.STATIC_DRAW);const et=l.createTexture();l.bindTexture(l.TEXTURE_2D,et);l.pixelStorei(l.UNPACK_ALIGNMENT,1);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);const u={width:512,height:512,background_color:D(245,171,195),is_running:!0,iterations:0,ipf:10,turmite:0,rand_colors:2,clear_on_spawn:!1};let q=[],p=me(u.width,u.height);function z(n){(p.width!==u.width||p.height!==u.height)&&(p=me(u.width,u.height)),q=[];for(let i=0;i<p.height;++i)for(let e=0;e<p.width;++e)fe(p,e,i,n)}function Ee(n){const i={},e=[u.background_color];for(let t=1;t<n.colors;t+=1)e.push(D(S(0,256),S(0,256),S(0,256)));for(const t of n.table)Ge(i,t[0],e[t[1]],t[2],e[t[3]],t[4]);q.push(qe(S(0,p.width),S(0,p.height),0,0,i))}function tt(){const n=u.rand_colors,i=[];for(let e=0;e<n;e+=1)i.push([0,e,0,(e+1)%n,S(-4,4)]);return{name:"Untitled",colors:n,table:i}}function nt(n){console.log(JSON.stringify(n))}const I=F(f,"Texture");_e(I,"Width",y(u,"width"),1,128,1024);_e(I,"Height",y(u,"height"),1,128,1024);Ue(I,"Background Color",oe.R_0_255,u.background_color);G(I,"Clear",function(){z(u.background_color)});const xe=F(f,"Controls");ue(xe,"Is Running",y(u,"is_running"));de(xe,"Iteration multiplier",y(u,"ipf"),1,1,100);const W=["state","color","next_state","next_color","turn"],H=F(f,"Preset");let k;Ce(H,"Turmite",y(u,"turmite"),R.map(n=>n.name),Object.keys(R).map(n=>parseInt(n)),function(n){k.ref_el.innerHTML="",k.ref_el.append(X(R[n].table,W))});M(H,"Specification");k=M(H,"");G(H,"Spawn",function(){Ee(R[u.turmite])});const A=F(f,"Random");let C;de(A,"Colors",y(u,"rand_colors"),1,2,32);ue(A,"Clear On Spawn",y(u,"clear_on_spawn"));G(A,"Spawn",function(){const n=tt();nt(n),C.ref_el.innerHTML="",C.ref_el.append(X(n.table,W)),u.clear_on_spawn&&z(u.background_color),Ee(n)});M(A,"Specification");C=M(A,"None");pe(f,N.container(),!1);k.ref_el.append(X(R[u.turmite].table,W));z(u.background_color);setInterval(()=>{if(u.is_running)for(let n=0;n<u.ipf*10;n+=1)for(const i of q){const e=We(p,i.x,i.y),t=i.table[ge(i.state,e)];t&&(fe(p,i.x,i.y,t.next_color),i.dir=U(i.dir+t.turn,K.length),i.state=t.next_state);const s=K[i.dir];i.x=U(i.x+s[0],p.width),i.y=U(i.y+s[1],p.height)}},1e3/30);function it(){l.texImage2D(l.TEXTURE_2D,0,l.RGB,p.width,p.height,0,l.RGB,l.UNSIGNED_BYTE,p.data),l.viewport(0,0,w.width,w.height),l.clearColor(0,0,0,1),l.clear(l.COLOR_BUFFER_BIT),l.useProgram(O);const n=Math.min(w.width,w.height);l.uniform1f(Ye,n/w.width),l.uniform1f(Ve,n/w.height),l.bindVertexArray(be),l.drawElements(l.TRIANGLES,Je,l.UNSIGNED_INT,0)}function we(){it(),requestAnimationFrame(we)}we();
