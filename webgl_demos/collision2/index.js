var ct=Object.defineProperty;var rt=(t,n,o)=>n in t?ct(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var g=(t,n,o)=>rt(t,typeof n!="symbol"?n+"":n,o);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();const X=Float32Array;function a(t=0,n){const o=new X(2);return o[0]=t,o[1]=n??t,o}function lt(t,n,o){return t[0]=n,t[1]=o,t}function z(t,n){return t[0]=n[0],t[1]=n[1],t}function ut(t,n){const o=new X(2);return o[0]=t[0]+n[0],o[1]=t[1]+n[1],o}function at(t,n){const o=new X(2);return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o}function T(t,n,o){const e=new X(2);return e[0]=t[0]+n[0]*o,e[1]=t[1]+n[1]*o,e}function R(t,n){const o=t[0]-n[0],e=t[1]-n[1];let s=o*o+e*e;s>0&&(s=1/Math.sqrt(s));const i=new X(2);return i[0]=o*s,i[1]=e*s,i}function F(t,n){return Math.hypot(t[0]-n[0],t[1]-n[1])}function Y(t,n){const o=t[0]-n[0],e=t[1]-n[1];return o*o+e*e}function K(t=0,n,o){const e=new X(3);return e[0]=t,e[1]=n??t,e[2]=o??t,e}let h;function ft(t){return h=t.getContext("2d")}let j=0,$=K(),W=K(),U=1;function ht(t,n,o){return`rgb(${t},${n},${o})`}function I(t){return`rgb(${t[0]},${t[1]},${t[2]})`}function L(t){j=0,$[0]=t[0],$[1]=t[1],$[2]=t[2]}function V(t,n){j=1,W[0]=t[0],W[1]=t[1],W[2]=t[2],U=n}function S(){j===0?(h.fillStyle=I($),h.fill()):(h.strokeStyle=I(W),h.lineWidth=U,h.stroke())}function _t(t,n,o){h.fillStyle=ht(t,n,o),h.fillRect(0,0,h.canvas.width,h.canvas.height)}function dt(){h.resetTransform()}function pt(){h.translate(h.canvas.width/2,h.canvas.height/2),h.scale(1,-1)}function yt(t,n,o,e){h.beginPath(),h.moveTo(t,n),h.lineTo(o,e),h.closePath(),S()}function Z(t,n){yt(t[0],t[1],n[0],n[1])}function mt(t,n,o,e,s){h.beginPath(),h.moveTo(t,n),h.lineTo(o,e),h.closePath(),h.strokeStyle=I($),h.lineWidth=s*2,h.lineJoin="round",h.stroke()}function gt(t,n,o){mt(t[0],t[1],n[0],n[1],o)}function xt(t,n,o){h.beginPath(),h.arc(t,n,o,0,Math.PI*2),h.closePath(),S()}function B(t,n){xt(t[0],t[1],n)}function bt(t,n,o,e){h.beginPath(),h.rect(t-o/2,n-e/2,o,e),h.closePath(),S()}function Mt(t,n){bt(t[0],t[1],n[0],n[1])}function wt(t,n,o,e,s){const i=h.getTransform();h.beginPath(),h.translate(t,n),h.rotate(s),h.rect(-o/2,-e/2,o,e),h.closePath(),h.setTransform(i),S()}function Pt(t,n,o){wt(t[0],t[1],n[0],n[1],o)}function kt(t,n,o,e){if(t.length<3)return;const s=h.getTransform(),i=t[0];h.beginPath(),h.translate(n,o),h.rotate(e),h.moveTo(i[0],i[1]);for(let c=1;c<t.length;c+=1){const r=t[c];h.lineTo(r[0],r[1])}h.closePath(),h.setTransform(s),S()}function Kt(t,n,o){kt(t,n[0],n[1],o)}const w={keys:{},buttons:{},kb_key_down:function(){},kb_key_up:function(){},m_move:function(){},m_button_down:function(){},m_button_up:function(){},m_wheel_scroll:function(){}};function Et(t){w.m_move=t}function zt(t){w.m_button_down=t}function Lt(t){w.m_button_up=t}function Tt(){addEventListener("keydown",function(t){w.keys[t.code]=0,w.kb_key_down({code:t.code,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey})}),addEventListener("keyup",function(t){w.keys[t.code]=1,w.kb_key_up({code:t.code,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey})}),addEventListener("mousemove",function(t){w.m_move({x:t.offsetX,y:t.offsetY,xd:t.movementX,yd:t.movementY,button:t.button,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey,target:t.target})}),addEventListener("mousedown",function(t){w.buttons[t.button]=0,w.m_button_down({x:t.offsetX,y:t.offsetY,xd:t.movementX,yd:t.movementY,button:t.button,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey,target:t.target})}),addEventListener("mouseup",function(t){w.buttons[t.button]=1,w.m_button_up({x:t.offsetX,y:t.offsetY,xd:t.movementX,yd:t.movementY,button:t.button,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey,target:t.target})}),addEventListener("wheel",function(t){w.m_wheel_scroll({xd:Math.sign(t.deltaX),yd:Math.sign(t.deltaY)})})}const A=Math.abs;function G(t,n,o){return Math.min(Math.max(t,n),o)}function q(t,n,o){return Y(t,o)<=n*n}function Yt(t,n,o,e){const s=n[0]-t[0],i=n[1]-t[1],c=e[0]-t[0],r=e[1]-t[1],l=(s*c+i*r)/(s*s+i*i),f=G(l,0,1),_=a(t[0]+s*f,t[1]+i*f);return Y(_,e)<=o*o}function Xt(t,n,o){const[e,s]=t,[i,c]=o,r=n[0]/2,l=n[1]/2;return i>=e-r&&i<=e+r&&c>=s-l&&c<=s+l}function qt(t,n,o,e){const s=e[0]-t[0],i=e[1]-t[1],c=Math.cos(-o),r=Math.sin(-o),l=s*c-i*r,f=s*r+i*c,_=n[0]/2,u=n[1]/2;return Math.abs(l)<=_&&Math.abs(f)<=u}function Ot(t,n){const[o,e]=n;let s=0;for(let i=0;i<t.length;i+=1){const[c,r]=t[i],[l,f]=t[(i+1)%t.length],_=(l-c)*(e-r)-(f-r)*(o-c),u=Math.sign(_);if(u!==0){if(s===0)s=u;else if(u!==s)return!1}}return!0}function $t(t,n,o,e){const[s,i]=n,[c,r]=e,l=Math.cos(-o),f=Math.sin(-o),_=(c-s)*l-(r-i)*f,u=(c-s)*f+(r-i)*l;return Ot(t,a(_,u))}function vt(t,n,o){const e=R(o,t);return T(t,e,n)}function v(t,n,o){const e=n[0]-t[0],s=n[1]-t[1],i=o[0]-t[0],c=o[1]-t[1],r=(e*i+s*c)/(e*e+s*s),l=G(r,0,1);return a(t[0]+e*l,t[1]+s*l)}function D(t,n,o,e){const s=n[0]-t[0],i=n[1]-t[1],c=e[0]-t[0],r=e[1]-t[1],l=(s*c+i*r)/(s*s+i*i),f=G(l,0,1),_=a(t[0]+s*f,t[1]+i*f),u=R(e,_);return T(_,u,o)}function tt(t,n,o){const[e,s]=t,[i,c]=o,r=n[0]/2,l=n[1]/2,f=e-r,_=s-l,u=e+r,p=s+l,y=A(f-i)<A(u-i)?f:u,d=A(_-c)<A(p-c)?_:p,m=v(a(y,_),a(y,p),o),x=v(a(f,d),a(u,d),o);return Y(m,o)<Y(x,o)?m:x}function St(t,n,o,e){const[s,i]=t,[c,r]=e,l=Math.cos(-o),f=Math.sin(-o),_=(c-s)*l-(r-i)*f,u=(c-s)*f+(r-i)*l,p=Math.cos(o),y=Math.sin(o),[d,m]=tt(a(),n,a(_,u)),x=d*p-m*y+s,H=d*y+m*p+i;return a(x,H)}function At(t,n){let o;for(let e=0;e<t.length;e+=1){const s=t[e],i=t[(e+1)%t.length],c=v(s,i,n);(!o||Y(n,c)<Y(n,o))&&(o=c)}return o}function Wt(t,n,o,e){const[s,i]=n,[c,r]=e,l=Math.cos(-o),f=Math.sin(-o),_=(c-s)*l-(r-i)*f,u=(c-s)*f+(r-i)*l,p=Math.cos(o),y=Math.sin(o),[d,m]=At(t,a(_,u)),x=d*p-m*y+s,H=d*y+m*p+i;return a(x,H)}function J(t,n,o,e){const s=e[0]-o[0],i=e[1]-o[1],c=o[0]-t[0],r=o[1]-t[1],l=s*s+i*i,f=2*(c*s+r*i),_=c*c+r*r-n*n,u=f*f-4*l*_;if(u<0)return[];const p=Math.sqrt(u),y=(-f-p)/(2*l),d=(-f+p)/(2*l),m=[];return y>=0&&y<=1&&m.push(a(o[0]+y*s,o[1]+y*i)),d>=0&&d<=1&&m.push(a(o[0]+d*s,o[1]+d*i)),m}function nt(t,n,o,e){const s=t[0]-n[0]/2,i=t[0]+n[0]/2,c=t[1]-n[1]/2,r=t[1]+n[1]/2,l=e[0]-o[0],f=e[1]-o[1];let _=0,u=1;if(l!==0){let y=(s-o[0])/l,d=(i-o[0])/l;y>d&&([y,d]=[d,y]),_=Math.max(_,y),u=Math.min(u,d)}else if(o[0]<s||o[0]>i)return[];if(f!==0){let y=(c-o[1])/f,d=(r-o[1])/f;y>d&&([y,d]=[d,y]),_=Math.max(_,y),u=Math.min(u,d)}else if(o[1]<c||o[1]>r)return[];if(_>u)return[];const p=[];return _>0&&_<1&&p.push(a(o[0]+_*l,o[1]+_*f)),u>0&&u<1&&u!==_&&p.push(a(o[0]+u*l,o[1]+u*f)),p}function Ft(t,n,o,e,s){const i=Math.cos(-o),c=Math.sin(-o);function r(d){const m=d[0]-t[0],x=d[1]-t[1];return a(m*i-x*c,m*c+x*i)}function l(d){const m=Math.cos(o),x=Math.sin(o);return a(d[0]*m-d[1]*x+t[0],d[0]*x+d[1]*m+t[1])}const f=r(e),_=r(s),u=a(0,0),p=a(n[0],n[1]);return nt(u,p,f,_).map(l)}function N(t,n,o,e){const s=t[0],i=t[1],c=n[0],r=n[1],l=o[0],f=o[1],_=e[0],u=e[1],p=(s-c)*(f-u)-(i-r)*(l-_);if(p===0)return[];const y=((s*r-i*c)*(l-_)-(s-c)*(l*u-f*_))/p,d=((s*r-i*c)*(f-u)-(i-r)*(l*u-f*_))/p,m=((y-s)*(c-s)+(d-i)*(r-i))/((c-s)**2+(r-i)**2),x=((y-l)*(_-l)+(d-f)*(u-f))/((_-l)**2+(u-f)**2);return m>=0&&m<=1&&x>=0&&x<=1?[a(y,d)]:[]}function Nt(t,n,o){const e=[];for(let s=0;s<t.length;s++){const i=t[s],c=t[(s+1)%t.length],r=N(i,c,n,o);e.push(...r)}return e}function Ct(t,n,o,e,s){const i=Math.cos(-o),c=Math.sin(-o);function r(p){const y=p[0]-n[0],d=p[1]-n[1];return a(y*i-d*c,y*c+d*i)}function l(p){const y=Math.cos(o),d=Math.sin(o);return a(p[0]*y-p[1]*d+n[0],p[0]*d+p[1]*y+n[1])}const f=r(e),_=r(s);return Nt(t,f,_).map(l)}function Ht(t,n,o,e,s){const i=R(t,n),c=a(-i[1],i[0]),r=T(t,c,-o),l=T(t,c,o),f=T(n,c,-o),_=T(n,c,o),u=[];for(const p of J(t,o,e,s))F(p,D(t,n,o,p))<=.001&&u.push(p);for(const p of J(n,o,e,s))F(p,D(t,n,o,p))<=.001&&u.push(p);return u.push(...N(r,f,e,s)),u.push(...N(l,_,e,s)),u.length>2&&console.log("test"),u}document.body.style.height="100vh";document.body.style.margin="0px";document.body.style.overflow="hidden";const b=document.createElement("canvas");document.body.append(b);b.width=b.parentElement.clientWidth;b.height=b.parentElement.clientHeight;addEventListener("resize",function(){b.width=b.parentElement.clientWidth,b.height=b.parentElement.clientHeight});const M=a();Tt();ft(b);class It{constructor(n,o){g(this,"position");g(this,"radius");this.position=n,this.radius=o}render(n){L(n),B(this.position,this.radius)}point_inside(n){return q(this.position,this.radius,n)}closest_point(n){return vt(this.position,this.radius,n)}rotate(n){}translate(n){z(this.position,n)}get_position(){return this.position}intersect_line(n,o){return J(this.position,this.radius,n,o)}}class Bt{constructor(n,o){g(this,"position");g(this,"size");this.position=n,this.size=o}render(n){L(n),Mt(this.position,this.size)}point_inside(n){return Xt(this.position,this.size,n)}closest_point(n){return tt(this.position,this.size,n)}rotate(n){}translate(n){z(this.position,n)}get_position(){return this.position}intersect_line(n,o){return nt(this.position,this.size,n,o)}}class Dt{constructor(n,o,e){g(this,"position");g(this,"size");g(this,"angle");this.position=n,this.size=o,this.angle=e}render(n){L(n),Pt(this.position,this.size,this.angle)}point_inside(n){return qt(this.position,this.size,this.angle,n)}closest_point(n){return St(this.position,this.size,this.angle,n)}rotate(n){this.angle+=n}translate(n){z(this.position,n)}get_position(){return this.position}intersect_line(n,o){return Ft(this.position,this.size,this.angle,n,o)}}class Q{constructor(n,o,e){g(this,"start");g(this,"end");g(this,"radius");this.start=n,this.end=o,this.radius=e}render(n){L(n),gt(this.start,this.end,this.radius)}point_inside(n){return Yt(this.start,this.end,this.radius,n)}closest_point(n){return D(this.start,this.end,this.radius,n)}rotate(n){}translate(n){}get_position(){return this.start}intersect_line(n,o){return Ht(this.start,this.end,this.radius,n,o)}}class C{constructor(n,o){g(this,"start");g(this,"end");this.start=n,this.end=o}render(n){V(n,2),Z(this.start,this.end)}point_inside(n){return F(v(this.start,this.end,n),n)<=2}closest_point(n){return v(this.start,this.end,n)}rotate(n){}translate(n){}get_position(){return this.start}intersect_line(n,o){return N(this.start,this.end,n,o)}}function Jt(t){let n=0,o=0,e=0;for(let s=0;s<t.length;s++){const i=t[s],c=t[(s+1)%t.length],r=i[0],l=i[1],f=c[0],_=c[1],u=r*_-f*l;n+=(r+f)*u,o+=(l+_)*u,e+=u}e*=.5,n/=6*e,o/=6*e;for(let s=0;s<t.length;s++){const i=t[s];i[0]-=n,i[1]-=o}return a(n,o)}class ot{constructor(n,o,e){g(this,"points");g(this,"center");g(this,"position");g(this,"angle");this.points=n,this.center=Jt(this.points),this.position=o,this.angle=e}render(n){L(n),Kt(this.points,this.position,this.angle)}point_inside(n){return $t(this.points,this.position,this.angle,n)}closest_point(n){return Wt(this.points,this.position,this.angle,n)}rotate(n){this.angle+=n}translate(n){z(this.position,n)}get_position(){return this.position}intersect_line(n,o){return Ct(this.points,this.position,this.angle,n,o)}}const Rt=a(-200,-200),jt=a(100,-400),k=[];k.push(new It(a(0),50));k.push(new Bt(a(200,10),a(120)));k.push(new Dt(a(-200,10),a(80,160),90));k.push(new Q(a(-200,200),a(200,400),30));k.push(new ot([a(-100,-86.6),a(100,-86.6),a(0,86.6)],a(200,-200),0));k.push(new ot([a(100,0),a(50,86.6),a(-50,86.6),a(-100,0),a(-50,-86.6),a(50,-86.6)],a(-500,-200),0));k.push(new C(a(-400,100),a(-200,300)));const O=new C(Rt,jt);k.push(O);let P=null,st=a(),et=a(),E=0;Et(function(t){if(t.target===b&&(lt(M,t.x-b.width/2,-t.y+b.height/2),P))if(P instanceof Q||P instanceof C)E===1?z(P.start,M):E===2&&z(P.end,M);else{const n=at(M,st);P.translate(ut(et,n))}});zt(function(t){if(t.target===b)for(const n of k){if(n instanceof Q)if(q(n.start,n.radius,M)){E=1,P=n;return}else if(q(n.end,n.radius,M)){E=2,P=n;return}else E=0;if(n instanceof C)if(q(n.start,20,M)){E=1,P=n;return}else if(q(n.end,20,M)){P=n,E=2;return}else E=0;if(n.point_inside(M)){P=n,z(st,M),z(et,n.get_position());return}}});Lt(function(t){t.target===b&&(P=null)});function Gt(){for(const t of k)t.rotate(.001)}function Qt(){dt(),_t(184,242,255),pt();for(const t of k){if(t===O){t.render(K(89,111,255));continue}t.point_inside(M)?t.render(K(227,227,227)):t.render(K(209,209,209))}for(const t of k){const n=t.closest_point(M);if(F(n,M)<=100&&(V(K(255,120,120),4),Z(n,M),L(K(255,120,120)),B(n,4)),t!==O){const o=t.intersect_line(O.start,O.end);for(const e of o)L(K(255,120,120)),B(e,4)}}}function it(){Gt(),Qt(),requestAnimationFrame(it)}it();
