var C=Object.defineProperty;var R=(t,o,n)=>o in t?C(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n;var y=(t,o,n)=>R(t,typeof o!="symbol"?o+"":o,n);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(e){if(e.ep)return;e.ep=!0;const s=n(e);fetch(e.href,s)}})();const K=Float32Array;function c(t=0,o){const n=new K(2);return n[0]=t,n[1]=o??t,n}function j(t,o,n){return t[0]=o,t[1]=n,t}function q(t,o){return t[0]=o[0],t[1]=o[1],t}function A(t,o){return t[0]+=o[0],t[1]+=o[1],t}function B(t,o){const n=new K(2);return n[0]=t[0]-o[0],n[1]=t[1]-o[1],n}function D(t,o){const n=new K(2);return n[0]=t[0]*o,n[1]=t[1]*o,n}function G(t){return Math.hypot(t[0],t[1])}function J(t){const o=new K(2),n=t[0],i=t[1];let e=n*n+i*i;return e>0&&(e=1/Math.sqrt(e)),o[0]=n*e,o[1]=i*e,o}function E(t,o){return Math.hypot(t[0]-o[0],t[1]-o[1])}function P(t=0,o,n){const i=new K(3);return i[0]=t,i[1]=o??t,i[2]=n??t,i}let r;function Q(t){return r=t.getContext("2d")}function U(t,o,n){return`rgb(${t},${o},${n})`}function V(t){return`rgb(${t[0]},${t[1]},${t[2]})`}function Z(t,o,n){r.fillStyle=U(t,o,n),r.fillRect(0,0,r.canvas.width,r.canvas.height)}function tt(t){r.moveTo(t[0],t[1])}function ot(t){r.lineTo(t[0],t[1])}function F(t,o){r.beginPath(),tt(t),ot(o),r.closePath()}function Y(t,o){r.beginPath(),r.arc(t[0],t[1],o/2,0,2*Math.PI),r.closePath()}function nt(t,o){r.beginPath(),r.rect(t[0]-o[0]/2,t[1]-o[1]/2,o[0],o[1]),r.closePath()}function b(t,o){r.strokeStyle=V(t),r.lineWidth=o,r.stroke()}const f={keys:{},buttons:{},kb_key_down:function(){},kb_key_up:function(){},m_move:function(){},m_button_down:function(){},m_button_up:function(){},m_wheel_scroll:function(){}};function et(t){f.m_move=t}function it(t){f.m_button_down=t}function st(t){f.m_button_up=t}function ct(){addEventListener("keydown",function(t){f.keys[t.code]=0,f.kb_key_down({code:t.code,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey})}),addEventListener("keyup",function(t){f.keys[t.code]=1,f.kb_key_up({code:t.code,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey})}),addEventListener("mousemove",function(t){f.m_move({x:t.offsetX,y:t.offsetY,xd:t.movementX,yd:t.movementY,button:t.button,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey,target:t.target})}),addEventListener("mousedown",function(t){f.buttons[t.button]=0,f.m_button_down({x:t.offsetX,y:t.offsetY,xd:t.movementX,yd:t.movementY,button:t.button,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey,target:t.target})}),addEventListener("mouseup",function(t){f.buttons[t.button]=1,f.m_button_up({x:t.offsetX,y:t.offsetY,xd:t.movementX,yd:t.movementY,button:t.button,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey,target:t.target})}),addEventListener("wheel",function(t){f.m_wheel_scroll({xd:Math.sign(t.deltaX),yd:Math.sign(t.deltaY)})})}const k=Math.abs,N=Math.hypot;function rt(t,o,n){return Math.min(Math.max(t,o),n)}document.body.style.margin="0";document.body.style.height="100vh";document.body.style.overflow="hidden";const h=document.createElement("canvas");h.width=document.body.clientWidth;h.height=document.body.clientHeight;document.body.append(h);addEventListener("resize",function(){h.width=document.body.clientWidth,h.height=document.body.clientHeight});function x(t,o,n){const i=o[0]-t[0],e=o[1]-t[1],s=n[0]-t[0],u=n[1]-t[1],l=(i*s+e*u)/(i*i+e*e),d=rt(l,0,1);return c(t[0]+i*d,t[1]+e*d)}class L{constructor(o,n){y(this,"position");y(this,"diameter");this.position=o,this.diameter=n}point_inside(o){const n=this.position[0]-o[0],i=this.position[1]-o[1],e=this.diameter/2;return n*n+i*i<=e*e}point_closest(o){const n=this.position[0]-o[0],i=this.position[1]-o[1],e=N(n,i),s=n/e,u=i/e,l=this.diameter/2;return c(this.position[0]-s*l,this.position[1]-u*l)}move(o){q(this.position,o)}move2(o){A(this.position,o)}render(o){Y(this.position,this.diameter),b(o,1)}}class X{constructor(o,n){y(this,"position");y(this,"size");this.position=o,this.size=n}point_inside(o){const n=this.position[0],i=this.position[1],e=this.size[0]/2,s=this.size[1]/2,u=n-e,l=i-s,d=n+e,_=i+s,g=o[0],w=o[1];return g>=u&&g<=d&&w>=l&&w<=_}point_closest(o){const n=this.position[0],i=this.position[1],e=this.size[0]/2,s=this.size[1]/2,u=n-e,l=i-s,d=n+e,_=i+s,g=o[0],w=o[1];if(g>=u&&g<=d&&w>=l&&w<=_){const $=k(u-o[0])<k(d-o[0])?u:d,O=k(l-o[1])<k(_-o[1])?l:_,z=x(c(u,O),c(d,O),o),T=x(c($,l),c($,_),o);return E(z,o)<E(T,o)?z:T}const I=x(c(u,_),c(d,_),o),v=x(c(d,l),c(d,_),o);return c(I[0],v[1])}move(o){q(this.position,o)}move2(o){A(this.position,o)}render(o){nt(this.position,this.size),b(o,1)}}class ut{constructor(o,n,i){y(this,"start");y(this,"end");y(this,"diameter");this.start=o,this.end=n,this.diameter=i}point_inside(o){return!1}point_closest(o){const n=x(this.start,this.end,o),i=n[0]-o[0],e=n[1]-o[1],s=N(i,e),u=i/s,l=e/s,d=this.diameter/2;return c(n[0]-u*d,n[1]-l*d)}move(o){}move2(o){}render(o){F(this.start,this.end),b(o,1),Y(this.start,this.diameter),b(o,1),Y(this.end,this.diameter),b(o,1)}}const m=[];m.push(new L(c(-200,200),100));m.push(new X(c(200,200),c(100,100)));m.push(new X(c(-200,-200),c(100,200)));m.push(new X(c(200,0),c(200,100)));const S=c(-400,0),W=c(-300,-400);m.push(new ut(S,W,50));m.push(new L(S,50));m.push(new L(W,50));const M=Q(h),p=c();let a;ct();et(function(t){if(t.target===h&&(j(p,t.x-h.width/2,-t.y+h.height/2),a&&(a.move(p),a instanceof L)))for(const o of m){if(o===a)continue;const n=o.point_closest(a.position),i=B(a.position,n),e=J(i),s=G(i);s<=a.diameter/2&&o.move2(D(e,s-a.diameter/2))}});it(function(t){if(t.target===h){for(const o of m)if(o.point_inside(p)){a=o;break}}});st(function(t){t.target===h&&a&&(a=null)});function dt(){M.resetTransform(),Z(0,0,0),M.translate(h.width/2,h.height/2),M.scale(1,-1);for(const t of m){let o;t.point_inside(p)?o=P(255,0,0):o=P(255,255,255);const n=t.point_closest(p);t.render(o),E(n,p)<200&&(F(p,n),b(P(255,0,255),1))}}function H(){dt(),requestAnimationFrame(H)}H();
