var ot=Object.defineProperty;var nt=(t,o,e)=>o in t?ot(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e;var h=(t,o,e)=>nt(t,typeof o!="symbol"?o+"":o,e);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(n){if(n.ep)return;n.ep=!0;const c=e(n);fetch(n.href,c)}})();const F=1e-6;function v(t){return t*Math.PI/180}const z=Math.sin,S=Math.cos;function it(t,o,e){return Math.min(Math.max(t,o),e)}const m=Float32Array;function x(t=0,o,e){const r=new m(3);return r[0]=t,r[1]=o??t,r[2]=e??t,r}function rt(t,o){const e=new m(3);return e[0]=t[0]+o[0],e[1]=t[1]+o[1],e[2]=t[2]+o[2],e}function V(t,o,e){return t[0]+=o[0]*e,t[1]+=o[1]*e,t[2]+=o[2]*e,t}function k(t){const o=t[0],e=t[1],r=t[2];let n=o*o+e*e+r*r;return n>0&&(n=1/Math.sqrt(n)),t[0]*=n,t[1]*=n,t[2]*=n,t}function O(t,o){const e=new m(3),r=t[0],n=t[1],c=t[2],s=o[0],a=o[1],_=o[2];return e[0]=n*_-c*a,e[1]=c*s-r*_,e[2]=r*a-n*s,e}function C(t=1,o=0,e=0,r=0,n=0,c,s=0,a=0,_=0,y=0,u,f=0,A=0,d=0,E=0,L){const l=new m(16);return l[0]=t,l[1]=o,l[2]=e,l[3]=r,l[4]=n,l[5]=t,l[6]=s,l[7]=a,l[8]=_,l[9]=y,l[10]=t,l[11]=f,l[12]=A,l[13]=d,l[14]=E,l[15]=t,l}function W(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ct(t,o,e,r,n){let c=1/Math.tan(o/2),s;return t[0]=c/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(s=1/(r-n),t[10]=(n+r)*s,t[14]=2*n*r*s):(t[10]=-1,t[14]=-2*r),t}function st(t,o,e,r){let n,c,s,a,_,y,u,f,A,d;const E=o[0],L=o[1],l=o[2],K=r[0],I=r[1],U=r[2],Y=e[0],D=e[1],N=e[2];return Math.abs(E-Y)<F&&Math.abs(L-D)<F&&Math.abs(l-N)<F?W(t):(u=E-Y,f=L-D,A=l-N,d=1/Math.hypot(u,f,A),u*=d,f*=d,A*=d,n=I*A-U*f,c=U*u-K*A,s=K*f-I*u,d=Math.hypot(n,c,s),d?(d=1/d,n*=d,c*=d,s*=d):(n=0,c=0,s=0),a=f*s-A*c,_=A*n-u*s,y=u*c-f*n,d=Math.hypot(a,_,y),d?(d=1/d,a*=d,_*=d,y*=d):(a=0,_=0,y=0),t[0]=n,t[1]=a,t[2]=u,t[3]=0,t[4]=c,t[5]=_,t[6]=f,t[7]=0,t[8]=s,t[9]=y,t[10]=A,t[11]=0,t[12]=-(n*E+c*L+s*l),t[13]=-(a*E+_*L+y*l),t[14]=-(u*E+f*L+A*l),t[15]=1,t)}class lt{constructor(){h(this,"position");h(this,"forward");h(this,"right");h(this,"up");h(this,"world_up");h(this,"projection");h(this,"view");h(this,"near");h(this,"far");h(this,"fov");h(this,"yaw");h(this,"pitch");h(this,"roll");h(this,"movement_speed");h(this,"yaw_speed");h(this,"pitch_speed");h(this,"roll_speed")}}function at(){const t=new lt;return t.position=x(),t.forward=x(0,0,-1),t.right=x(1,0,0),t.up=x(0,1,0),t.world_up=x(0,1,0),t.projection=C(1),t.view=C(1),t.near=.01,t.far=1e3,t.fov=80,t.yaw=0,t.pitch=0,t.roll=0,t.movement_speed=.1,t.yaw_speed=.1,t.pitch_speed=.1,t.roll_speed=.1,t}function j(t,o){V(t.position,t.forward,t.movement_speed*o)}function H(t,o){V(t.position,t.right,t.movement_speed*o)}function _t(t,o){t.yaw+=t.yaw_speed*o}function ft(t,o){t.pitch=it(t.pitch-t.pitch_speed*o,-89,89)}function dt(t){t.forward=k(x(z(v(t.yaw))*S(v(t.pitch)),z(v(t.pitch)),-S(v(t.yaw))*S(v(t.pitch)))),t.right=k(O(t.forward,t.world_up)),t.up=k(O(t.right,t.forward))}function ut(t,o,e){ct(t.projection,v(t.fov),o/e,t.near,t.far)}function ht(t){st(t.view,t.position,rt(t.position,t.forward),t.up)}let p;function pt(t){return p=t.getContext("webgl2")}function yt(t,o){const e=p.createShader(t);if(!e)return null;if(p.shaderSource(e,o),p.compileShader(e),!p.getShaderParameter(e,p.COMPILE_STATUS)){const n=p.getShaderInfoLog(e);return console.error(n),p.deleteShader(e),null}return e}function gt(t){const o=p.createProgram(),e=[];for(const n in t){const c=t[n],s=yt(parseInt(n),c);if(!s){for(const a of e)p.deleteShader(a);return null}e.push(s)}for(const n of e)p.attachShader(o,n);p.linkProgram(o);for(const n of e)p.detachShader(o,n),p.deleteShader(n);if(!p.getProgramParameter(o,p.LINK_STATUS)){const n=p.getProgramInfoLog(o);return console.error(n),p.deleteProgram(o),null}return o}const w={keys:{},buttons:{},kb_key_down:function(){},kb_key_up:function(){},m_move:function(){},m_button_down:function(){},m_button_up:function(){},m_wheel_scroll:function(){}};function bt(t){w.kb_key_down=t}function wt(t){w.m_move=t}function At(){addEventListener("keydown",function(t){w.keys[t.code]=0,w.kb_key_down({code:t.code,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey})}),addEventListener("keyup",function(t){w.keys[t.code]=1,w.kb_key_up({code:t.code,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey})}),addEventListener("mousemove",function(t){w.m_move({x:t.offsetX,y:t.offsetY,xd:t.movementX,yd:t.movementY,button:t.button,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey,target:t.target})}),addEventListener("mousedown",function(t){w.buttons[t.button]=0,w.m_button_down({x:t.offsetX,y:t.offsetY,xd:t.movementX,yd:t.movementY,button:t.button,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey,target:t.target})}),addEventListener("mouseup",function(t){w.buttons[t.button]=1,w.m_button_up({x:t.offsetX,y:t.offsetY,xd:t.movementX,yd:t.movementY,button:t.button,alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey,target:t.target})}),addEventListener("wheel",function(t){w.m_wheel_scroll({xd:Math.sign(t.deltaX),yd:Math.sign(t.deltaY)})})}function M(t){return w.keys[t]===0}function xt(t,o){const e=o[0],r=o[1],n=o[2];return t[12]=t[0]*e+t[4]*r+t[8]*n+t[12],t[13]=t[1]*e+t[5]*r+t[9]*n+t[13],t[14]=t[2]*e+t[6]*r+t[10]*n+t[14],t[15]=t[3]*e+t[7]*r+t[11]*n+t[15],t}function Et(t,o){let e=Math.sin(o),r=Math.cos(o),n=t[4],c=t[5],s=t[6],a=t[7],_=t[8],y=t[9],u=t[10],f=t[11];return t[4]=n*r+_*e,t[5]=c*r+y*e,t[6]=s*r+u*e,t[7]=a*r+f*e,t[8]=_*r-n*e,t[9]=y*r-c*e,t[10]=u*r-s*e,t[11]=f*r-a*e,t}function Lt(t,o){let e=Math.sin(o),r=Math.cos(o),n=t[0],c=t[1],s=t[2],a=t[3],_=t[8],y=t[9],u=t[10],f=t[11];return t[0]=n*r-_*e,t[1]=c*r-y*e,t[2]=s*r-u*e,t[3]=a*r-f*e,t[8]=n*e+_*r,t[9]=c*e+y*r,t[10]=s*e+u*r,t[11]=a*e+f*r,t}function vt(t,o){let e=Math.sin(o),r=Math.cos(o),n=t[0],c=t[1],s=t[2],a=t[3],_=t[4],y=t[5],u=t[6],f=t[7];return t[0]=n*r+_*e,t[1]=c*r+y*e,t[2]=s*r+u*e,t[3]=a*r+f*e,t[4]=_*r-n*e,t[5]=y*r-c*e,t[6]=u*r-s*e,t[7]=f*r-a*e,t}document.body.style.margin="0";document.body.style.height="100vh";document.body.style.overflow="hidden";const b=document.createElement("canvas");b.width=document.body.clientWidth;b.height=document.body.clientHeight;document.body.append(b);addEventListener("resize",function(){b.width=document.body.clientWidth,b.height=document.body.clientHeight});const i=pt(b),R=gt({[i.VERTEX_SHADER]:`#version 300 es
        layout(location = 0) in vec3 i_position;
        layout(location = 1) in vec2 i_tex_coord;
        layout(location = 2) in mat4 i_model;
        out vec2 v_tex_coord;
        uniform mat4 u_projection;
        uniform mat4 u_view;
        uniform mat4 u_model;

        void main() {
            gl_Position = u_projection * u_view * i_model * vec4(i_position, 1.0);
            v_tex_coord = i_tex_coord;
        }
    `,[i.FRAGMENT_SHADER]:`#version 300 es
        precision highp float;
        in vec2 v_tex_coord;
        out vec4 o_frag_color;

        void main() {
            vec2 uv = v_tex_coord * 2.0 - 1.0;
            float edge_size = 0.8;
            float fade_width = 0.1;
            vec2 edge_dist = abs(uv) - edge_size;
            float max_dist = max(edge_dist.x, edge_dist.y);
            float edge_factor = smoothstep(0.0, fade_width, max_dist);
            vec3 edge_color = vec3(1.0, 0.0, 1.0);

            o_frag_color = vec4(edge_color, edge_factor);
        }
    `}),q=i.getAttribLocation(R,"i_position"),G=i.getAttribLocation(R,"i_tex_coord"),Rt=i.getAttribLocation(R,"i_model"),mt=i.getUniformLocation(R,"u_projection"),Mt=i.getUniformLocation(R,"u_view"),Ft=[-1,1,1,0,0,-1,-1,1,0,1,1,-1,1,1,1,1,1,1,1,0,1,1,-1,0,0,1,-1,-1,0,1,-1,-1,-1,1,1,-1,1,-1,1,0,-1,1,-1,0,0,-1,-1,-1,0,1,-1,-1,1,1,1,-1,1,1,1,0,1,1,1,0,0,1,-1,1,0,1,1,-1,-1,1,1,1,1,-1,1,0,-1,1,-1,0,0,-1,1,1,0,1,1,1,1,1,1,1,1,-1,1,0,-1,-1,1,0,0,-1,-1,-1,0,1,1,-1,-1,1,1,1,-1,1,1,0],$=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],St=$.length,J=i.createVertexArray();i.bindVertexArray(J);const kt=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,kt);i.bufferData(i.ARRAY_BUFFER,new Float32Array(Ft),i.STATIC_DRAW);i.enableVertexAttribArray(q);i.vertexAttribPointer(q,3,i.FLOAT,!1,20,0);i.enableVertexAttribArray(G);i.vertexAttribPointer(G,2,i.FLOAT,!1,20,12);const Pt=i.createBuffer();i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,Pt);i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint32Array($),i.STATIC_DRAW);const Q=100,Z=100,P=Q*Z,T=new Float32Array(P*16),B=[];for(let t=0;t<P;++t)B.push(new m(T.buffer,t*16*4,16));let X=0;for(let t=0;t<Z;t++)for(let o=0;o<Q;o++){const e=B[X];W(e),xt(e,x(t*6,0,o*6)),X++}const tt=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,tt);i.bufferData(i.ARRAY_BUFFER,T.byteLength,i.DYNAMIC_DRAW);for(let t=0;t<4;++t){const o=Rt+t;i.enableVertexAttribArray(o),i.vertexAttribPointer(o,4,i.FLOAT,!1,4*16,t*16),i.vertexAttribDivisor(o,1)}const g=at();g.position=x(10,10,10);g.yaw=135;g.pitch=-15;At();wt(function(t){document.pointerLockElement===b&&(_t(g,t.xd),ft(g,t.yd))});bt(function(t){t.code==="Backquote"&&(document.pointerLockElement===b?document.exitPointerLock():b.requestPointerLock())});function Tt(){document.pointerLockElement===b&&(M("KeyA")&&H(g,-1),M("KeyD")&&H(g,1),M("KeyS")&&j(g,-1),M("KeyW")&&j(g,1)),dt(g),ut(g,b.width,b.height),ht(g)}setInterval(()=>{for(const t of B)Et(t,Math.random()/50),Lt(t,Math.random()/50),vt(t,Math.random()/50)},1e3/30);i.enable(i.DEPTH_TEST);i.enable(i.CULL_FACE);i.enable(i.BLEND);i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA);function Bt(){i.viewport(0,0,b.width,b.height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.useProgram(R),i.uniformMatrix4fv(mt,!1,g.projection),i.uniformMatrix4fv(Mt,!1,g.view),i.bindVertexArray(J),i.bindBuffer(i.ARRAY_BUFFER,tt),i.bufferSubData(i.ARRAY_BUFFER,0,T),i.drawElementsInstanced(i.TRIANGLES,St,i.UNSIGNED_INT,0,P)}function et(){Tt(),Bt(),requestAnimationFrame(et)}et();
